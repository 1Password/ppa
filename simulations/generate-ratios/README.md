# Ratios of generated to Non-generated passwords

## Background

Some passwords stored in a 1Password vault or set of vaults belong to a user can be generated by 1Password's generator. 
Others may come from other sources.
For a number of years, passwords created with the generator are distinctively marked within the item. In particular, they have an exact password strength instead of an estimated strength.

### Generated are under-counted

There are a substantial number of ways in which we can get false negatives on whether a password is generated.

1. A generated password copied into a different item will be treated as human created.
2. A generated password that has been edited by a human in any way will be treated as human created.
3. A password that is generated by some other system, for example the passwords created by browser password managers will be treated as human generated.


### Generated status and strength is e2e encrypted

The (estimated) password strengths and whether they are generated or not is information that is encrypted (ultimately) by the user's account password and Secret Key. Knowing whether any individual's password is generated or human created would give an attacker a great deal of information is selecting targets.

## Approach

For starting, we will take the simplest form local DP possible. We will divide up the ratios of generated to total passwords into $n$ bins.

If b is our number of bins and k_i is a particular bin for i in [0, ..., k -1], the then the mid points of each bin will be

    b/2 + k_i/b 
    
 We will define our r,

 r(x) = the relevant step function

We will leave till later whether this will be per vault or per account or per user. R in [0,1].

For simplicity we will use 3 bins. As stated in example 2.16 of Li et al:

> Note that to satisfy \epsilon-DP, it is important that the way the attribute values are partitioned into bins does not depend on the input dataset. If the partitioning depends on the input dataset, one has to [do additional math].

Following the scalar mechanism from section 2.16 we will just add Laplacian noise with the distribution Lap(\Delta f/epsilon).

With b bins, we can \Delta f is 1 - 1/b.







